<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Actividad: Clasifica los documentos</title>
<style>
  body { font-family: Arial, sans-serif; padding: 16px; background:#f7f9fc; color:#222; }
  h1 { font-size:20px; margin-bottom:8px; }
  .layout { display:flex; gap:12px; flex-wrap:wrap; }
  .folders { display:flex; gap:12px; flex-wrap:wrap; }
  .folder {
    width: 46%;
    min-height: 200px;
    border: 2px dashed #6b7280;
    border-radius:10px;
    padding:10px;
    background:#fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }
  .folder h3 { margin:0 0 8px 0; font-size:16px; }
  #documents { margin-top:14px; display:flex; flex-direction:column; gap:8px; }
  .document {
    padding:8px 10px;
    border-radius:8px;
    background:#e6f0ff;
    border:1px solid #9bb1ff;
    display:inline-block;
    cursor:grab;
    user-select:none;
  }
  #controls { margin-top:14px; display:flex; gap:8px; flex-wrap:wrap; }
  button { padding:10px 14px; border:none; border-radius:8px; cursor:pointer; }
  button.primary { background:#0b76ef; color:white; }
  button.ghost { background:#eee; color:#333; }
  #resultado { margin-top:12px; padding:12px; border-radius:10px; display:none; white-space:pre-wrap; }
  .ok { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
  .error { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }
  /* Responsive */
  @media (min-width:760px){
    .folder { width: 23%; }
    #documents { width:100%; display:flex; flex-wrap:wrap; gap:8px; }
  }
</style>
</head>
<body>

<h1>Actividad: Clasifica los documentos en la carpeta correcta</h1>
<p>Arrastra cada documento y su√©ltalo dentro de la carpeta que corresponda. Cuando termines pulsa <strong>Enviar resultados</strong>.</p>

<div class="layout">
  <div class="folders" id="folders">
    <div class="folder" id="Contabilidad" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>üìò Contabilidad</h3>
    </div>

    <div class="folder" id="TalentoHumano" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>üßë‚Äçüíº Talento Humano</h3>
    </div>

    <div class="folder" id="GestionDocumental" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>üìö Gesti√≥n Documental</h3>
    </div>

    <div class="folder" id="Proveedores" ondrop="drop(event)" ondragover="allowDrop(event)">
      <h3>üßæ Proveedores</h3>
    </div>
  </div>
</div>

<h3>Documentos</h3>
<div id="documents">
  <!-- Los ids deben coincidir con las claves en correctMapping -->
  <div class="document" draggable="true" id="Factura_001.pdf" ondragstart="drag(event)">Factura_001.pdf</div>
  <div class="document" draggable="true" id="SolicitudVacaciones.docx" ondragstart="drag(event)">SolicitudVacaciones.docx</div>
  <div class="document" draggable="true" id="ActaReunion.docx" ondragstart="drag(event)">ActaReunion.docx</div>
  <div class="document" draggable="true" id="ContratoServicio.pdf" ondragstart="drag(event)">ContratoServicio.pdf</div>
  <div class="document" draggable="true" id="InformeVentas.xlsx" ondragstart="drag(event)">InformeVentas.xlsx</div>
  <div class="document" draggable="true" id="HojaDeVida_Juan.docx" ondragstart="drag(event)">HojaDeVida_Juan.docx</div>
  <div class="document" draggable="true" id="PQRS_Cliente.txt" ondragstart="drag(event)">PQRS_Cliente.txt</div>
  <div class="document" draggable="true" id="Nomina_Diciembre.xlsx" ondragstart="drag(event)">Nomina_Diciembre.xlsx</div>
  <div class="document" draggable="true" id="Inventario_Bodega.pdf" ondragstart="drag(event)">Inventario_Bodega.pdf</div>
  <div class="document" draggable="true" id="Memorando_Interno.docx" ondragstart="drag(event)">Memorando_Interno.docx</div>
  <div class="document" draggable="true" id="PlanCapacitacion.pdf" ondragstart="drag(event)">PlanCapacitacion.pdf</div>
  <div class="document" draggable="true" id="ContratoLaboral_Julia.pdf" ondragstart="drag(event)">ContratoLaboral_Julia.pdf</div>
  <div class="document" draggable="true" id="ReciboCaja_2025.pdf" ondragstart="drag(event)">ReciboCaja_2025.pdf</div>
  <div class="document" draggable="true" id="PermisoSalida.docx" ondragstart="drag(event)">PermisoSalida.docx</div>
  <div class="document" draggable="true" id="ReporteIndicadores.xlsx" ondragstart="drag(event)">ReporteIndicadores.xlsx</div>
</div>

<div id="controls">
  <button class="primary" onclick="enviar()">Enviar resultados</button>
  <button class="ghost" onclick="resetActividad()">Reiniciar</button>
  <button style="display:inline-block;background:#ef4444;color:white;border:none;border-radius:8px;padding:10px 12px;" onclick="salir()">Salir</button>
</div>

<div id="resultado"></div>

<script>
/* ----------------------
   Mapeo CORRECTO esperado
   Las claves son los ids de los documentos
   Los valores son el id de la carpeta correcta
   ---------------------- */
const correctMapping = {
  "Factura_001.pdf": "Contabilidad",
  "InformeVentas.xlsx": "Contabilidad",
  "Nomina_Diciembre.xlsx": "Contabilidad",
  "ReciboCaja_2025.pdf": "Contabilidad",
  "ReporteIndicadores.xlsx": "Contabilidad",

  "HojaDeVida_Juan.docx": "TalentoHumano",
  "SolicitudVacaciones.docx": "TalentoHumano",
  "ContratoLaboral_Julia.pdf": "TalentoHumano",
  "PermisoSalida.docx": "TalentoHumano",
  "PlanCapacitacion.pdf": "TalentoHumano",

  "ActaReunion.docx": "GestionDocumental",
  "Memorando_Interno.docx": "GestionDocumental",
  "PQRS_Cliente.txt": "GestionDocumental", // puedes mover PQRS aqu√≠ o a Atenci√≥n al Cliente; aqu√≠ lo colocamos como gesti√≥n

  "ContratoServicio.pdf": "Proveedores",
  "Inventario_Bodega.pdf": "Proveedores"
};

/* Ajusta este umbral si quieres */
const UMBRAL_ACIERTOS = 10;

/* Drag & drop b√°sicos */
function allowDrop(ev) { ev.preventDefault(); }
function drag(ev) { ev.dataTransfer.setData("text/plain", ev.target.id); }
function drop(ev) {
  ev.preventDefault();
  let data = ev.dataTransfer.getData("text/plain");
  let dragged = document.getElementById(data);

  // Si el objetivo es la carpeta (o dentro de un elemento hijo), buscamos el folder contenedor
  let target = ev.currentTarget;
  // Append al folder
  target.appendChild(dragged);
}

/* Recolecta resultados y calcula puntaje */
function enviar() {
  const resultadoBox = document.getElementById('resultado');
  resultadoBox.style.display = 'block';

  // Recorrer carpetas
  const carpetas = ["Contabilidad","TalentoHumano","GestionDocumental","Proveedores"];
  let conteoCorrectos = 0;
  let total = Object.keys(correctMapping).length;
  let detalles = [];

  // Crear mapa del destino actual
  let ubicacionActual = {};
  carpetas.forEach(c => {
    let folderElem = document.getElementById(c);
    // todos los elementos .document que est√°n dentro de la carpeta actual
    folderElem.querySelectorAll('.document').forEach(d => {
      ubicacionActual[d.id] = c;
    });
  });

  // Los documentos que el usuario dej√≥ sin mover permanecen en el contenedor "documents"
  document.querySelectorAll('#documents .document').forEach(d => {
    ubicacionActual[d.id] = "sin ubicar";
  });

  // Comparar con el mapping correcto
  for (let docId in correctMapping) {
    let correcto = correctMapping[docId];
    let ub = ubicacionActual[docId] || "sin ubicar";
    let esOk = (ub === correcto);
    if (esOk) conteoCorrectos++;
    detalles.push({ documento: docId, correctoPara: correcto, puestoEn: ub, acierto: esOk });
  }

  // Mensajes autom√°ticos seg√∫n umbral
  let mensajeCabecera = "";
  let clase = "";
  if (conteoCorrectos >= UMBRAL_ACIERTOS) {
    mensajeCabecera = `‚úÖ ¬°Felicidades! Has avanzado a la siguiente etapa.\nTe esperamos el 18 de noviembre a las 2:00 p.m. en nuestras oficinas.\n\n`;
    clase = "ok";
  } else {
    mensajeCabecera = `‚ùå Gracias por participar. Lamentamos que no contin√∫es con el proceso de selecci√≥n.\n\n`;
    clase = "error";
  }

  // Construir texto de resultado (puedes adaptar para enviar al servidor)
  let texto = mensajeCabecera;
  texto += `Puntaje: ${conteoCorrectos} de ${total}.\n\nDetalle:\n`;
  detalles.forEach(it => {
    texto += `${it.documento} ‚Äî correcto en: ${it.correctoPara} ‚Äî puesto en: ${it.puestoEn} ‚Äî ${it.acierto ? "OK" : "INCORRECTO"}\n`;
  });

  // Mostrar resultado
  resultadoBox.className = clase;
  resultadoBox.innerText = texto;

  // (Opcional) aqu√≠ podr√≠as enviar 'detalles' por fetch a un endpoint o generar un email
  // ejemplo: enviarPorEmail(detalles, conteoCorrectos);
}

/* Reiniciar la actividad (vuelve a colocar los documentos en la lista original) */
function resetActividad() {
  const docsContainer = document.getElementById('documents');
  // lista de documentos en el orden original
  const ids = ["Factura_001.pdf","SolicitudVacaciones.docx","ActaReunion.docx","ContratoServicio.pdf",
              "InformeVentas.xlsx","HojaDeVida_Juan.docx","PQRS_Cliente.txt","Nomina_Diciembre.xlsx",
              "Inventario_Bodega.pdf","Memorando_Interno.docx","PlanCapacitacion.pdf","ContratoLaboral_Julia.pdf",
              "ReciboCaja_2025.pdf","PermisoSalida.docx","ReporteIndicadores.xlsx"];
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (el) docsContainer.appendChild(el);
  });

  // ocultar resultado
  const resultadoBox = document.getElementById('resultado');
  resultadoBox.style.display = 'none';
  resultadoBox.className = '';
  resultadoBox.innerText = '';
}

/* Bot√≥n Salir */
function salir() {
  // intenta cerrar la ventana (puede no funcionar en algunos navegadores). Alternativa: ir a about:blank
  try { window.close(); } catch(e) { window.location.href = "about:blank"; }
}
</script>

</body>
</html>
